import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from scipy.stats import binom, norm

# Load the Titanic dataset
data = pd.read_csv('train.csv')

# a. Calculating Simple Probabilities
# Probability of survival
p_survived = data['Survived'].mean()
print(f"Probability of survival: {p_survived:.2f}")

# Probability of survival for females
female_survived = data[data['Sex'] == 'female']['Survived'].mean()
print(f"Probability of survival for females: {female_survived:.2f}")

# Joint Probability: P(Survived=1 | Pclass=1)
p_class_1_survived = data[data['Pclass'] == 1]['Survived'].mean()
print(f"Probability of survival for 1st class passengers: {p_class_1_survived:.2f}")

# b. Applications of Probability Distributions
# Binomial distribution: Survival prediction
n_passengers = len(data)
success_rate = p_survived
binomial_dist = binom(n_passengers, success_rate)
x = np.arange(0, n_passengers+1)
plt.bar(x, binomial_dist.pmf(x))
plt.title("Binomial Distribution of Survival")
plt.xlabel("Number of Survivors")
plt.ylabel("Probability")
plt.show()

# Normal distribution: Age distribution
ages = data['Age'].dropna()
mean_age = np.mean(ages)
std_age = np.std(ages)
x = np.linspace(min(ages), max(ages), 100)
plt.plot(x, norm.pdf(x, mean_age, std_age))
plt.title("Normal Distribution of Passenger Age")
plt.xlabel("Age")
plt.ylabel("Probability Density")
plt.show()
