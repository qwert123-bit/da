import pandas as pd
from scipy.stats import ttest_1samp, ttest_ind, f_oneway, chi2_contingency

# Load the Titanic dataset
data = pd.read_csv('train.csv')

# Fill missing values for Age
data['Age'] = data['Age'].fillna(data['Age'].median())

# T-Tests
# 1. One-Sample T-Test: Is the average age different from 30?
t_stat, p_value = ttest_1samp(data['Age'], 30)
print(f"One-Sample T-Test: p-value={p_value:.2f}")

# 2. Two-Independent Samples T-Test: Age of males vs. females
male_age = data[data['Sex'] == 'male']['Age']
female_age = data[data['Sex'] == 'female']['Age']
t_stat, p_value = ttest_ind(male_age, female_age)
print(f"Two-Independent Samples T-Test: p-value={p_value:.2f}")

# ANOVA
# Compare age across passenger classes
age_class_1 = data[data['Pclass'] == 1]['Age']
age_class_2 = data[data['Pclass'] == 2]['Age']
age_class_3 = data[data['Pclass'] == 3]['Age']
f_stat, p_value = f_oneway(age_class_1, age_class_2, age_class_3)
print(f"ANOVA: p-value={p_value:.2f}")

# Chi-Square Test
# Association between gender and survival
contingency_table = pd.crosstab(data['Sex'], data['Survived'])
chi2, p, dof, expected = chi2_contingency(contingency_table)
print(f"Chi-Square Test: p-value={p:.2f}")
